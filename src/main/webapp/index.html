<html>
<head>
    <title>主页</title>

    <script src="js/jquery-1.12.4.min.js">

    </script>

    <link href="bootstrap-3.3.7-dist/css/bootstrap.min.css"
          rel="stylesheet"/>
    <script src="bootstrap-3.3.7-dist/js/bootstrap.min.js">

    </script>

    <!-- 引入 ECharts 文件 -->
    <script src="js/echarts.js">
    </script>
</head>
<body>

<div class="container-fluid">
    <div class="row">
        <div class="col-xs-4 col-md-offset-4">
            <form>
                <div class="form-group" >
                    <label for="year">文件所属年份</label>
                    <input type="text" class="form-control" id="year" placeholder="2011">
                </div>
                <div class="form-group">
                    <label for="file">选择文件</label>
                    <input type="file" id="file">
                </div>
                <div class="checkbox">
                    <label>
                        <input type="checkbox"> 如果数据存在则覆盖
                    </label>
                </div>
                <button class="btn btn-default" onclick="fileupload()">提交</button>
            </form>
        </div>
    </div>
</div>


<script>
    function fileupload() {
        var formData = new FormData($("#form")[0]);
        $.ajax({
            url: '/upload',
            type: 'post',
            data: formData,
            // 必须false才会自动加上正确的Content-Type
            contentType: false,
            // 必须false才会避开jQuery对 formdata 的默认处理
            // XMLHttpRequest会对 formdata 进行正确的处理
            processData: false,
            success: function (data) {
                alert(data);
            },
            error: function (data) {
                alert(data);
            },
            cache: false,
            async: true
        });
    }

</script>

</body>
</html>
